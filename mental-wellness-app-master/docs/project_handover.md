# 心理健康应用项目交接文档

## 项目概述

这是一个综合性的心理健康支持应用程序，旨在通过现代技术手段帮助用户更好地理解和追踪自己的情绪状态，并提供相应的支持资源。项目采用 TypeScript + React 技术栈，集成了 AI 情绪检测和语音交互等先进功能。

## 核心功能模块

### 1. 情绪追踪（Mood Tracker）
- 功能描述：允许用户记录和追踪日常情绪状态
- 技术实现：待实现
- 优先级：高

### 2. 主动意识（Active Awareness）
- 功能描述：实时面部情绪检测和分析
- 技术实现：
  - 使用 TensorFlow.js 进行机器学习
  - 使用 MediaPipe 进行面部检测
  - 支持多种情绪状态检测（快乐、中性、悲伤、愤怒等）
- 当前状态：
  - 基础框架已实现
  - 存在文件加载问题（WASM 文件）
  - 需要优化初始化流程
- 优先级：高

### 3. 语音聊天（Voice Chat）
- 功能描述：提供语音交互的心理支持
- 技术实现：
  - 基础 UI 组件已完成
  - 语音录制功能已实现
  - 音频播放功能已实现
- 待实现功能：
  - 语音转文本（STT）集成
  - 文本转语音（TTS）集成
  - GPT API 集成
  - RAG 系统集成
- 优先级：中

### 4. 资源中心（Resources）
- 功能描述：提供心理健康相关教育资源
- 技术实现：待实现
- 优先级：中

### 5. 个人资料（Profile）
- 功能描述：用户账户管理和个性化设置
- 技术实现：待实现
- 优先级：低

## 技术架构

### 前端框架
- React + TypeScript
- Vite 构建工具
- ESLint + Prettier 代码规范

### 核心依赖
- TensorFlow.js：机器学习模型
- MediaPipe：面部检测
- React Router：路由管理
- Styled Components：样式管理

### 开发环境
- Node.js 环境
- TypeScript 配置
- 开发服务器端口：3000-3002

## 待办事项

### 高优先级
1. 面部检测功能优化
   - 解决 WASM 文件加载问题
   - 优化初始化流程
   - 完善错误处理机制
   - 添加备用情绪输入方法

2. 情绪追踪功能实现
   - 设计数据模型
   - 实现用户界面
   - 添加数据持久化

### 中优先级
1. 语音聊天功能完善
   - 集成 STT 服务
   - 集成 TTS 服务
   - 实现 GPT API 连接
   - 设计 RAG 系统架构

2. 资源中心开发
   - 设计内容结构
   - 实现内容管理系统
   - 添加搜索功能

### 低优先级
1. 个人资料功能
   - 用户认证系统
   - 个性化设置
   - 数据统计展示

## 注意事项

### 技术注意事项
1. 面部检测
   - 确保 WASM 文件正确加载
   - 注意浏览器兼容性
   - 优化性能，避免内存泄漏

2. 语音功能
   - 注意音频质量
   - 考虑网络延迟
   - 实现适当的错误处理

3. 数据安全
   - 用户数据加密存储
   - 敏感信息保护
   - 符合隐私法规

### 开发注意事项
1. 代码规范
   - 遵循 TypeScript 最佳实践
   - 保持代码注释完整
   - 定期进行代码审查

2. 测试要求
   - 单元测试覆盖核心功能
   - 集成测试确保模块协作
   - 性能测试关注关键路径

3. 文档维护
   - 及时更新开发日志
   - 保持文档与代码同步
   - 记录重要决策和原因

## 已知问题

1. 面部检测
   - WASM 文件加载失败
   - 初始化超时问题
   - 文件权限问题

2. 语音功能
   - 音频处理性能待优化
   - 网络连接稳定性
   - 错误处理机制待完善

## 后续建议

1. 技术优化
   - 考虑使用 Web Workers 处理计算密集型任务
   - 实现渐进式加载优化用户体验
   - 添加离线功能支持

2. 功能扩展
   - 添加情绪趋势分析
   - 实现个性化推荐
   - 集成更多心理健康资源

3. 性能提升
   - 优化资源加载
   - 实现缓存机制
   - 减少不必要的重渲染

## 联系方式

- 文档维护：[刘雅丹 2025年4月27日更新] 